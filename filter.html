<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reverse Image Filtering - Process</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet" />
  </head>
  <body>
    <div class="breadcrumb-container">
      <div class="breadcrumb-content">
        <h2>Reverse Image Filtering</h2>
        <p>
          <span>Home</span> &bull; <span>Reverse Image Filtering</span> &bull;
          <span>Process</span>
        </p>
      </div>
      <div class="breadcrumb-icon">
        <img src="images/icons.png" alt="Icon" />
      </div>
    </div>

    <div class="process-container">
      <div class="image-container">
        <h3>Image Selected</h3>
        <div id="filteredImage" class="image-box"></div>
      </div>

      <button id="processButton" class="process-button">Remove Filter</button>
      <div id="loadingIndicator" class="loading-indicator hidden">
        <div class="loader"></div>
        <p>Processing... This may take a few moments</p>
      </div>

      <div class="results-container hidden" id="resultsContainer">
        <div class="image-container">
          <h3>Input Image</h3>
          <div id="originalImage" class="image-box"></div>
        </div>

        <div class="image-container">
          <h3>Restored Image (Result)</h3>
          <div id="restoredImage" class="image-box"></div>
        </div>

        <div id="similarityContainer" class="similarity-container hidden">
          <div class="similarity-label">Similarity</div>
          <div class="similarity-bar-container">
            <div
              id="similarityBar"
              class="similarity-fill"
              style="width: 0%"></div>
          </div>
          <div class="similarity-percentage">
            <span id="similarityScore">0%</span>
          </div>
        </div>
      </div>
    </div>

    <div class="back-container">
      <a href="main.html" class="back-button">‚Üê Back to Upload</a>
    </div>

    <script>
      // Store the uploaded image in localStorage when coming from index.html
      document.addEventListener("DOMContentLoaded", function () {
        const params = new URLSearchParams(window.location.search);
        const imageData = params.get("image");

        if (imageData) {
          localStorage.setItem("uploadedImage", imageData);
        }
      });
    </script>
    <script src="filter.js"></script>
  </body>
</html>
